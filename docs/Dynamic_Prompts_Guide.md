# Dynamic Prompts & コンテキスト制御ガイド

Project Wannabe では、本文や詳細情報（プロットなど）の中に特定の記号を記述することで、AIに送信する内容を細かく制御したり、ランダムな変化を加えたりすることができます。

これらは **「プロンプト生成の前処理」** として実行されるため、元のテキストデータを消すことなく、AIへの指示だけを動的に変更できます。

## 1. コメントアウト機能（AIに読ませない）

自分用のメモ書きや、一時的にボツにした文章など、AIに送信したくないテキストを除外します。

### 行末コメントアウト: `@//`
記号 `@//` から、その行の終わり（改行）までのテキストを無視します。行の途中からでも使用可能です。

**使用例:**
```text
吾輩は猫である。 @// ここはあとで書き直す
名前はまだない。
```
**AIに送られる内容:**
```text
吾輩は猫である。 
名前はまだない。
```

### 範囲コメントアウト: `@/* ... @*/`
開始記号 `@/*` から終了記号 `@*/` までの範囲をすべて無視します。複数行にまたがって記述できます。

**使用例:**
```text
昔々、あるところに
@/*
（ここからボツ案）
おじいさんとおばあさんがいました。
（ここまでボツ案）
*/@
勇敢な女騎士がいました。
```
**AIに送られる内容:**
```text
昔々、あるところに
勇敢な女騎士がいました。
```

---

## 2. コンテキスト範囲の制御（読み込ませる範囲の指定）

物語が長くなってきた場合や、途中から別の展開を試したい（枝分かれさせたい）場合に、AIが参照するテキストの範囲を強制的に区切ることができます。

### 開始地点の指定: `@break` または `@startpoint`
このタグより **上（前）** にある文章はすべて無視されます。物語の途中からリスタートしたい場合や、過去の文脈を断ち切ってシーン転換したい場合に便利です。
※ 複数ある場合は、**一番下（最後）**にあるものが有効になります。

**使用例:**
```text
（第1章の長いテキスト...）
...そして彼は旅立った。

@break

（第2章）
新しい街に着いた。
```
**AIに送られる内容:**
（`@break` より下の「（第2章）新しい街に着いた。」以降のみが送信されます）

### 終了地点の指定: `@endpoint`
このタグより **下（後）** にある文章はすべて無視されます。物語の途中に新しいシーンを挿入したい場合、未来の展開（既に書いてある続き）をAIに見せずに生成させるのに使えます。
※ 複数ある場合は、**一番上（最初）**にあるものが有効になります。

**使用例:**
```text
彼は剣を抜いた。
@endpoint
（ここから先はまだAIに見せたくない、あるいは書き換えたい未来の展開）
魔王は倒れた。
```
**AIに送られる内容:**
（`@endpoint` より上の「彼は剣を抜いた。」までが送信されます）

---

## 3. Dynamic Prompts（ランダム選択）

`{}` で囲んで `|` で区切ることで、その中からランダムに1つの言葉が選ばれてAIに送信されます。

**記法:** `{選択肢A|選択肢B|選択肢C}`

**使用例:**
```text
空からは{雨|雪|槍}が降っていた。
```
**AIに送られる内容（例）:**
```text
空からは雪が降っていた。
```
（生成のたびに変わる可能性があります）

---

## 処理の優先順位

これらの機能は以下の順序で処理されます。

1.  **コメントアウトの除去** (`@//`, `@/* */`)
2.  **範囲の切り出し** (`@break`, `@endpoint`)
3.  **ランダム選択の展開** (`{}`)

したがって、コメントアウトされた範囲の中に `@break` や `{}` を書いても、それらは無視（削除）されます。
